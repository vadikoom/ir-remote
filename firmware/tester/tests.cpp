#include <stdio.h>
#include "./lessar_command.h"

int rawCommand[] = {
	4350, 4300, 500, 1650, 500, 600, 450, 1650, 500, 1650, 500, 600, 500, 550,
	500, 1650, 500, 600, 450, 600, 500, 1650, 500, 600, 450, 600, 500, 1600, 550,
	1600, 550, 550, 500, 1650, 500, 600, 450, 1650, 500, 1650, 500, 1650, 500,
	1650, 500, 600, 450, 1650, 500, 1650, 500, 1650, 500, 600, 450, 600, 500, 600,
	450, 600, 500, 1600, 550, 550, 500, 600, 500, 1600, 550, 1600, 500, 1650, 500,
	600, 500, 600, 450, 600, 500, 600, 450, 600, 500, 600, 450, 600, 500, 600,
	450, 1650, 500, 1650, 500, 1650, 450, 1650, 500, 1650, 600, 5050, 4400, 4200,
	500, 1650, 500, 600, 500, 1650, 450, 1650, 550, 550, 500, 600, 500, 1600, 550,
	550, 500, 600, 500, 1600, 500, 600, 500, 600, 450, 1650, 500, 1650, 500, 600,
	500, 1600, 500, 600, 500, 1650, 500, 1600, 550, 1600, 500, 1650, 500, 600,
	450, 1650, 500, 1650, 550, 1600, 500, 600, 450, 650, 450, 600, 450, 650, 450,
	1650, 500, 600, 450, 600, 500, 1650, 450, 1700, 450, 1700, 450, 600, 500, 600,
	450, 650, 450, 600, 450, 650, 450, 600, 450, 650, 450, 600, 450, 1650, 500,
	1650, 500, 1650, 500, 1650, 450, 1700, 450
};


void testSimplePrint() {
    Result<LessarCommand> result = LessarCommand::decodeFromRaw(rawCommand, sizeof(rawCommand) / sizeof(int));
	if (!result.ok()) {
	    debug("Error: %s\n", result.error());
		return;
	} 

	LessarCommand cmd = result.value();
    char buffer[1024];
    cmd.printBits(buffer);
    debug("Bits: %s\n", buffer);
}

int main() {
    testSimplePrint();
}
